{"version":3,"file":"js/696.92bc32a1.js","mappings":"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","sources":["webpack://click-buy-frontend/./src/apis/carts.js","webpack://click-buy-frontend/./src/views/CartView.vue","webpack://click-buy-frontend/./src/views/CartView.vue?73a2"],"sourcesContent":["import { apiHelper } from './../utils/helpers'\r\nconst getToken = () => localStorage.getItem('token')\r\n\r\nexport default {\r\n  addToCart(productId, amount) {\r\n    const data = {\r\n      productId,\r\n      amount\r\n    }\r\n    return apiHelper.post('/carts/add', data, {\r\n      headers: { Authorization: `Bearer ${getToken()}` }\r\n    })\r\n  },\r\n  getCart() {\r\n    return apiHelper.get('/carts', {\r\n      headers: { Authorization: `Bearer ${getToken()}` }\r\n    })\r\n  },\r\n  buyProducts(carts) {\r\n    return apiHelper.put('/carts/buy', { carts: [...carts] }, {\r\n      headers: { Authorization: `Bearer ${getToken()}` }\r\n    })\r\n  }\r\n}","<template>\r\n  <div>\r\n    <table>\r\n      <thead>\r\n        <tr>\r\n          <th class=\"check-box\"></th>\r\n          <th class=\"product-info\">商品</th>\r\n          <th class=\"product-price\">單價</th>\r\n          <th class=\"product-amount\">數量</th>\r\n          <th class=\"total-count\">總計</th>\r\n          <th class=\"action\">操作</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"product in carts\" :key=\"product.productId\">\r\n          <td class=\"check-box\">\r\n            <input\r\n              type=\"checkbox\"\r\n              :id=\"product.productId\"\r\n              :value=\"product.productId\"\r\n              v-model=\"checkedProducts\"\r\n            />\r\n          </td>\r\n          <td class=\"product-info\">\r\n            <div class=\"product-img\">\r\n              <img :src=\"product.Product.image\" alt=\"\" />\r\n            </div>\r\n            <div class=\"product-des\">\r\n              {{ product.Product.name }}\r\n            </div>\r\n          </td>\r\n          <td class=\"product-price\">${{ product.Product.price }}</td>\r\n          <td class=\"product-amount\">{{ product.amount }}</td>\r\n          <td class=\"total-count\">\r\n            ${{ product.Product.price * product.amount }}\r\n          </td>\r\n          <td class=\"action\">\r\n            <button type=\"button\" class=\"btn btn-danger\">刪除</button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <div class=\"totalBlock\">\r\n      <button class=\"btn btn-primary\" @click.prevent.stop=\"buyProducts\">\r\n        確認購買\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { onMounted, ref } from \"vue\";\r\n// import { useRoute } from \"vue-router\";\r\nimport { Toast } from \"../utils/helpers\";\r\nimport cartAPI from \"./../apis/carts\";\r\n\r\nexport default {\r\n  setup() {\r\n    const carts = ref([]);\r\n    const checkedProducts = ref([]);\r\n\r\n    const fetchCart = async () => {\r\n      const response = await cartAPI.getCart();\r\n      carts.value = response.data.data.carts;\r\n    };\r\n\r\n    const buyProducts = async () => {\r\n      try{\r\n        const buyContent = []\r\n        for(let i in carts.value){\r\n          let product = carts.value[i]\r\n          for(let j in checkedProducts.value){\r\n            let checkedProduct = checkedProducts.value[j]\r\n            if(product.productId === checkedProduct){\r\n              buyContent.push(product)\r\n            }\r\n          }\r\n        }\r\n    \r\n        await cartAPI.buyProducts(buyContent);\r\n\r\n        Toast.fire({\r\n          icon: \"success\",\r\n          title: \"購買成功\",\r\n        });\r\n      }catch(err){\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"購買失敗，請稍後再試\",\r\n        });\r\n      }\r\n    };\r\n\r\n    onMounted(() => {\r\n      fetchCart();\r\n    });\r\n\r\n    return { carts, checkedProducts, buyProducts };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\ntable {\r\n  margin-top: 40px;\r\n  width: 100%;\r\n}\r\nth,\r\ntd {\r\n  text-align: center;\r\n}\r\nthead {\r\n  line-height: 40px;\r\n  background: white;\r\n  border-bottom: 10px solid #f5f5f5;\r\n  border-collapse: collapse;\r\n}\r\ntbody {\r\n  line-height: 200px;\r\n  background: white;\r\n  border-bottom: 10px solid #f5f5f5;\r\n}\r\ntr {\r\n  display: flex;\r\n}\r\n.check-box {\r\n  flex: 1;\r\n}\r\n.product-info {\r\n  display: flex;\r\n  flex: 8;\r\n}\r\n.product-amount {\r\n  flex: 2;\r\n}\r\n.action {\r\n  flex: 2;\r\n}\r\n.product-img {\r\n  padding: 10px;\r\n}\r\n</style>","import { render } from \"./CartView.vue?vue&type=template&id=b9f636ba&scoped=true\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport \"./CartView.vue?vue&type=style&index=0&id=b9f636ba&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b9f636ba\"]])\n\nexport default __exports__"],"names":["getToken","localStorage","getItem","addToCart","productId","amount","data","apiHelper","post","headers","Authorization","getCart","get","buyProducts","carts","put","_createElementVNode","class","type","_createElementBlock","_hoisted_1","_Fragment","_renderList","$setup","product","key","_hoisted_2","id","value","checkedProducts","$event","_hoisted_4","_hoisted_5","src","Product","image","alt","_hoisted_7","_toDisplayString","name","_hoisted_8","price","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","onClick","_cache","_withModifiers","args","setup","ref","fetchCart","async","response","cartAPI","buyContent","i","j","checkedProduct","push","Toast","fire","icon","title","err","onMounted","__exports__","render"],"sourceRoot":""}